<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=800">
    <title>帮助文档</title>
    <!-- CSS链接，我们会在Java中内联它 -->
    <style>
        /* 使用系统字体，确保服务器已安装这些字体 */
        @font-face {
            font-family: 'NotoSansSC-Regular';
            src: local('Noto Sans SC Regular'), local('思源黑体 CN Regular');
        }

        @font-face {
            font-family: 'NotoSansSC-Bold';
            src: local('Noto Sans SC Bold'), local('思源黑体 CN Bold');
        }

        /* 在 @font-face 区域添加它 */
        @font-face {
            font-family: 'SSFangTangTi';
            /* 确认字体在系统中的确切名称，例如 '得意黑' 或 'Smiley Sans' */
            src: local('得意黑'), local('Smiley Sans'), local('SSFangTangTi');
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #f9f9f9; /* 浅灰色背景，便于调试时看清边界 */
            font-family: 'NotoSansSC-Regular', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            width: 1400px; /* 从 800px 增加到 1400px，宽度翻倍以容纳双列 */
            padding: 20px;
            background-color: #fff0f5;
            box-sizing: border-box;
            /* 防止容器高度坍塌 */
            overflow: hidden;
        }

        .card-masonry-container {
            /* 使用 CSS Column 布局实现瀑布流 */
            column-count: 2;          /* 分为 2 列 */
            column-gap: 20px;         /* 列间距 */
            margin-bottom: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ffdae5; /* 头部深一点的粉色 */
            padding: 10px 20px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .header, .footer {
            column-span: all; /* 如果你希望头尾贯穿（需父容器支持，或移出分列容器） */
            width: 100%;
        }

        .character-placeholder img {
            height: 90px;
            width: auto;
            /* 图片垂直居中对齐 */
            vertical-align: middle;
        }

        .title-main {
            text-align: center;
            color: #d15a7c;
        }

        .title-jp {
            font-family: 'NotoSansSC-Bold', sans-serif;
            font-size: 24px;
            margin: 0;
            letter-spacing: 2px;
        }

        .title-cn {
            font-size: 42px;
            font-family: 'SSFangTangTi', 'NotoSansSC-Bold', sans-serif;
            margin: 5px 0 0 0;
        }

        .help-card {
            background-color: white;
            border-radius: 12px;
            margin-bottom: 20px; /* 卡片垂直间距 */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            overflow: hidden;

            /* 关键属性：防止卡片在列之间断开 */
            break-inside: avoid;
            -webkit-column-break-inside: avoid;
            page-break-inside: avoid;

            /* 确保作为 block 元素渲染 */
            display: inline-block;
            width: 100%;
        }

        .card-header {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            background-color: #fff7fa; /* 卡片头部极淡的粉色 */
            border-bottom: 1px solid #ffe8ef;
        }

        .card-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
        }

        .card-title {
            font-size: 20px;
            font-weight: bold;
            color: #e86488;
        }

        .card-body {
            padding: 5px 20px 15px 20px;
        }

        .help-table {
            width: 100%;
            border-collapse: collapse; /* 合并边框 */
            font-size: 15px;
        }

        .help-table thead tr {
            border-bottom: 2px solid #fce3e9;
        }

        .help-table th {
            padding: 12px 8px;
            text-align: left;
            color: #b36d81;
            font-weight: bold;
        }

        .help-table tbody tr {
            border-bottom: 1px solid #fef3f6;
        }

        .help-table tbody tr:last-child {
            border-bottom: none; /* 最后一行无下边框 */
        }

        .help-table td {
            padding: 12px 8px;
            vertical-align: top;
            color: #555;
            line-height: 1.5;
        }

        /* 命令列特殊样式 */
        .help-table td:last-child {
            font-family: Consolas, Monaco, 'Courier New', monospace;
            color: #e83e8c; /* 粉色代码 */
            font-weight: bold;
        }


        .footer {
            /* 背景图片设置 (保持不变) */
            background-image: url("[[${res['image/bottom.jpg']}]]");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;

            /* 布局与尺寸 (保持不变) */
            height: 200px;
            box-sizing: border-box;
            padding: 20px;
            text-align: center;

            /* 定位基准 (保持不变) */
            position: relative;
            z-index: 1;
            border-radius: 10px;
            overflow: hidden;
        }

        /*
         * 【优化点 1: 使用渐变叠加层】
         * 相比纯色叠加，从上到下的渐变可以保留图片顶部的更多细节，
         * 同时又加深了底部文字区域的背景，让文字更清晰。
         */
        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            /* 从顶部完全透明，过渡到底部 60% 不透明度的黑色 */
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6));
            z-index: -1;
            border-radius: 10px; /* 保持与父元素一致的圆角 */
        }

        /*
         * 【优化点 2: 统一字体与基础阴影】
         * 统一使用更通用的无衬线字体。
         */
        .footer p {
            margin: 5px 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; /* 使用系统UI字体，更现代 */
            z-index: 2;
            /* 调整文字阴影，使其更清晰，轮廓感更强 */
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);
        }

        /* 动态提示信息的样式 */
        .hint-text {
            font-size: 18px; /* 稍微增大字号，使其更突出 */
            font-weight: 500; /* 使用 medium 字重，比 bold 柔和但同样清晰 */
            color: #FFFFFF;
            padding-top: 40px;
        }

        /*
         * 【优化点 3: 调整 support-info 样式】
         * 减小字号，调整颜色和位置，使其更像一个次要的“版权”信息。
         */
        .support-info {
            font-size: 12px; /* 减小字号，与主信息拉开差距 */
            font-weight: 400; /* 普通字重 */
            color: rgba(255, 255, 255, 0.85); /* 使用带透明度的白色，能更好地融入背景 */
            position: absolute;
            bottom: 15px; /* 向上微调，留出更多底部呼吸空间 */
            right: 20px;
            margin: 0;
            z-index: 2;
            letter-spacing: 0.5px; /* 增加一点字间距，提升精致感 */
        }



    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <!-- 左侧角色图片占位符 -->
        <div class="character-placeholder">
            <img th:src="${res['image/character.png']}" alt="Character">
        </div>
        <!-- 中间标题 -->
        <div class="title-main">
            <p class="title-jp">WINEFOX BOT HELP</p>
            <p class="title-cn">小酒狐の帮助文档</p>
        </div>
        <!-- 右侧留空，或可以放Logo -->
        <div class="character-placeholder">
            <img th:src="${res['image/bot_icon.png']}" alt="Bot Icon">
        </div>
    </div>

    <!-- 功能分组卡片，使用 th:each 循环 -->
    <div class="card-masonry-container">
        <!-- 功能分组卡片，使用 th:each 循环 -->
        <div th:each="group : ${help_data.groups}" class="help-card">
            <div class="card-header">
                <img th:src="${group.icon != null ? res[group.icon] : res['icon/默认图标.png']}" class="card-icon" alt="">
                <span class="card-title" th:text="${group.name}">功能分组标题</span>
            </div>
            <div class="card-body">
                <table class="help-table">
                    <tbody>
                    <tr th:each="doc : ${group.documentation}">
                        <td th:text="${doc.name}" style="width: 15%;">功能名称</td>
                        <!-- 如果宽度不够，可以适当隐藏 权限 列，或者简写 -->
                        <td th:text="${doc.permission}" style="width: 10%;">权限</td>
                        <td th:text="${doc.description}">描述...</td>
                        <td th:utext="${doc.getFormattedCommands().replace('\n', '<br/>')}" style="width: 30%;">/cmd</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 底部提示信息 -->
    <div class="footer">
        <p class="hint-text" th:text="${hint_text}">“提示信息”</p>
        <p class="support-info">Support By FlanChanXwO@github</p>
    </div>

</div>
</body>
</html>
