<!doctype html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
 <meta charset="UTF-8">
 <title>ä»Šæ—¥ç¾¤æ´»è·ƒæ’è¡Œæ¦œ</title>
 <style>
  * {
   box-sizing: border-box;
   margin: 0;
   padding: 0;
   font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  }

  body {
   background: #282A36;
  }

  .poster {
   width: 800px;
   padding: 30px;
   color: #F8F8F2;
   background: #282A36;
   border-radius: 16px;
   box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
   /* é˜²æ­¢å†…å®¹æ’‘å¼€å¯¼è‡´å¸ƒå±€é”™ä¹±ï¼Œè®¾ç½®ä¸º inline-block æˆ–è€… table ä¹Ÿå¯ä»¥ï¼Œè§† playwight æˆªå›¾ç­–ç•¥è€Œå®šï¼Œè¿™é‡Œä¿æŒ block */
  }

  .header {
   display: flex;
   align-items: center;
   margin-bottom: 25px;
   padding-bottom: 20px;
   border-bottom: 1px solid #44475A;
  }

  .header h1 {
   font-size: 32px;
   font-weight: 700;
   color: #BD93F9;
   text-shadow: 0 0 10px rgba(189, 147, 249, 0.5);
  }

  .time {
   color: #6272A4;
   margin-top: 8px;
   font-size: 14px;
  }

  .rank-item {
   display: flex;
   align-items: center;
   background: #44475A;
   border-radius: 12px;
   padding: 12px 20px;
   margin-bottom: 12px;
   transition: all 0.2s ease-in-out;
   border: 2px solid transparent;
   position: relative;
   overflow: hidden;
  }

  .rank-number {
   font-size: 22px;
   font-weight: 700;
   color: #8BE9FD;
   width: 40px;
   text-align: center;
  }

  .avatar img {
   width: 56px;
   height: 56px;
   border-radius: 50%;
   border: 2px solid #6272A4;
   margin-left: 10px;
   object-fit: cover; /* é˜²æ­¢å¤´åƒå˜å½¢ */
  }

  .info {
   flex: 1;
   margin-left: 16px;
  }

  .name {
   font-size: 18px;
   font-weight: 500;
   color: #F8F8F2;
   display: flex;
   align-items: center;
  }

  .count {
   color: #BD93F9;
   font-size: 13px;
   margin-top: 4px;
  }

  .crown {
   margin-left: 8px;
   font-size: 20px;
   display: inline-block;
   vertical-align: middle;
   line-height: 1;
  }

  /* Rank Styles & Glows */
  .rank-1::before, .rank-2::before, .rank-3::before {
   content: '';
   position: absolute;
   top: 50%;
   left: 50%;
   width: 200%;
   height: 200%;
   background-image: radial-gradient(circle, var(--glow-color) 0%, transparent 50%);
   transform: translate(-50%, -50%);
   opacity: 0.15;
   animation: rotateGlow 15s linear infinite;
  }

  /* æ’åç‰¹æœ‰æ ·å¼ï¼šè¾¹æ¡†ã€èƒŒæ™¯å¾®è°ƒã€å‘å…‰å˜é‡ */
  .rank-1 {
   border-color: #FFB86C;
   background: #4a4324;
   box-shadow: 0 0 15px rgba(255, 184, 108, 0.4);
   --glow-color: #FFB86C;
  }
  .rank-2 {
   border-color: #8BE9FD;
   background: #2a3f4a;
   box-shadow: 0 0 15px rgba(139, 233, 253, 0.4);
   --glow-color: #8BE9FD;
  }
  .rank-3 {
   border-color: #BD93F9;
   background: #392c4a;
   box-shadow: 0 0 15px rgba(189, 147, 249, 0.4);
   --glow-color: #BD93F9;
  }

  @keyframes rotateGlow {
   from { transform: translate(-50%, -50%) rotate(0deg); }
   to { transform: translate(-50%, -50%) rotate(360deg); }
  }

  .progress-container {
   width: 220px;
   display: flex;
   align-items: center;
  }

  .progress-bar-bg {
   flex-grow: 1;
   height: 12px;
   background-color: #282A36;
   border-radius: 6px;
   overflow: hidden;
   position: relative;
  }

  .progress-bar-fg {
   height: 100%;
   border-radius: 6px;
   transition: width 0.5s ease-out;
   /* é»˜è®¤é¢œè‰²ï¼ˆ4åä»¥åï¼‰ */
   background: #44475A;
  }

  /* === é‡ç‚¹ï¼šå°†é¢œè‰²é…ç½®ç§»åˆ° CSS ä¸­ === */
  /* ç¬¬ä¸€åè¿›åº¦æ¡é¢œè‰² */
  .rank-1 .progress-bar-fg { background: linear-gradient(90deg, #FFB86C, #FF79C6); }
  /* ç¬¬äºŒåè¿›åº¦æ¡é¢œè‰² */
  .rank-2 .progress-bar-fg { background: linear-gradient(90deg, #8BE9FD, #50FA7B); }
  /* ç¬¬ä¸‰åè¿›åº¦æ¡é¢œè‰² */
  .rank-3 .progress-bar-fg { background: linear-gradient(90deg, #BD93F9, #FF79C6); }


  .percent-text {
   width: 60px;
   text-align: right;
   font-size: 14px;
   font-weight: 500;
   color: #50FA7B;
   margin-left: 10px;
  }

  .footer {
   margin-top: 30px;
   padding-top: 20px;
   border-top: 1px solid #44475A;
   text-align: center;
   color: #6272A4;
   font-size: 12px;
  }
 </style>
</head>
<body>
<div class="poster">
 <div class="header">
  <div>
   <h1>ä»Šæ—¥ç¾¤æ´»è·ƒæ’è¡Œæ¦œ</h1>
   <!-- æ—¶é—´ -->
   <div class="time" th:text="${time}">2026-01-22 12:00</div>
  </div>
 </div>

 <!-- åˆ—è¡¨åŒºåŸŸï¼šth:each å¾ªç¯ -->
 <div class="rank-list">
  <!--
       th:classappend: åŠ¨æ€è¿½åŠ  classã€‚å¦‚æœ item.rank æ˜¯ 1ï¼Œåˆ™è¿½åŠ  rank-1
  -->
  <div th:each="item : ${rankList}"
       class="rank-item"
       th:classappend="${'rank-' + item.rank}">

   <!-- æ’åæ•°å­— -->
   <div class="rank-number" th:text="${item.rank}">1</div>

   <!-- å¤´åƒ -->
   <div class="avatar">
    <!--
       th:src: ç»‘å®šå›¾ç‰‡åœ°å€
       th:onerror: å¦‚æœæ²¡æœ‰å¤´åƒæˆ–åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å›¾ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰
    -->
    <img th:src="${item.avatarUrl}" alt="avatar"/>
   </div>

   <div class="info">
    <div class="name">
     <!-- æ˜µç§° -->
     <span th:text="${item.nickname}">ç”¨æˆ·æ˜µç§°</span>

     <!-- çš‡å† /å¥–ç‰Œï¼šåªåœ¨å‰3åæ˜¾ç¤º -->
     <span th:if="${item.rank == 1}" class='crown gold'>ğŸ‘‘</span>
     <span th:if="${item.rank == 2}" class='crown silver'>ğŸ¥ˆ</span>
     <span th:if="${item.rank == 3}" class='crown bronze'>ğŸ¥‰</span>
    </div>
    <!-- å‘è¨€æ¬¡æ•° -->
    <div class="count" th:text="|å‘è¨€æ¬¡æ•°: ${item.msgCount}|">å‘è¨€æ¬¡æ•°: 100</div>
   </div>

   <div class="progress-container">
    <div class="progress-bar-bg">
     <!--
        th:style: åŠ¨æ€è®¾ç½®å®½åº¦
        é¢œè‰²ä¸å†éœ€è¦åœ¨è¿™é‡Œè®¾ç½®ï¼ŒCSSä¼šæ ¹æ®çˆ¶çº§çš„ rank-x ç±»è‡ªåŠ¨åŒ¹é…
     -->
     <div class="progress-bar-fg" th:style="|width: ${item.percent}%;|"></div>
    </div>
    <!-- ç™¾åˆ†æ¯”æ–‡æœ¬ï¼šæ ¼å¼åŒ–ä¸ºä¸¤ä½å°æ•° -->
    <div class="percent-text" th:text="${#numbers.formatDecimal(item.percent, 1, 2) + '%'}">10.00%</div>
   </div>
  </div>
 </div>

 <div class="footer">
  ç”± <span th:text="${generator}">Bot</span> ç”Ÿæˆ
 </div>
</div>
</body>
</html>
