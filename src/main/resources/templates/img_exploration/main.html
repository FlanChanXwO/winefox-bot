<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>Search Result</title>
    <!-- 关键点：CSS 内容由 Java 读取后注入这里 -->
    <style th:utext="${cssContent}"></style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="title-main">
            <div class="title-en">IMAGE EXPLORATION</div>
            <h1 class="title-cn">图源搜索结果</h1>
        </div>
    </div>

    <!-- 循环渲染列表 -->
    <div class="result-card" th:each="item, iterStat : ${items}">
        <div class="source-tag">
            NO.<span th:text="${iterStat.count}">1</span>
            from
            <span class="source-highlight" th:text="${item.source}">Google</span>
        </div>

        <div class="thumb-wrapper">
            <!-- imageBase64 是我们在 Java 端预处理好的字段 -->
            <img th:src="${item.imageBase64}" alt="thumbnail"/>
        </div>

        <div class="info-wrapper">
            <div class="title-text" th:text="${#strings.isEmpty(item.title) ? 'Unknown Title' : item.title}">
                Title Here
            </div>

            <div class="row">
                <span class="label">Similarity</span>
                <!-- 使用 Thymeleaf 类追加逻辑 -->
                <span class="similarity-val"
                      th:classappend="${item.similarityScore >= 90 ? 'sim-high' : (item.similarityScore >= 70 ? 'sim-med' : 'sim-low')}"
                      th:text="${item.similarityDisplay}">
                    95.5%
                </span>
            </div>

            <div class="row">
                <span class="label">Source</span>
                <span style="flex: 1; overflow: hidden; text-overflow: ellipsis;">
                    <a class="link-text" th:href="${item.url}" th:text="${item.url}">http://...</a>
                </span>
            </div>

            <div class="row" th:if="${!#strings.isEmpty(item.description)}">
                <span class="label">Info</span>
                <span th:text="${item.description}">Description...</span>
            </div>
        </div>
    </div>

    <div class="footer">
        Generated by WineFox Bot
    </div>
</div>
</body>
</html>
